<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Knitting Pro - 2026</title><meta name="viewport" content="width=device-width,initial-scale=1.0"><style>body{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:'Segoe UI',Arial,sans-serif;background:#f3f4f6;color:#333;min-height:100vh;display:flex;flex-direction:column}input,textarea{-webkit-user-select:text;user-select:text}*{box-sizing:border-box;margin:0;padding:0}.header{background:linear-gradient(135deg,#1e3a8a,#2563eb);color:#fff;padding:10px;text-align:center;font-size:16px;font-weight:bold;position:sticky;top:0;z-index:100;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 5px rgba(0,0,0,0.2)}#main-app-container{display:flex;flex:1;flex-direction:column}.page{display:none;flex:1;flex-direction:column}.active{display:flex}.container{width:100%;max-width:480px;margin:0 auto;padding:5px}.card{background:#fff;padding:10px;border-radius:8px;margin-bottom:6px;box-shadow:0 2px 8px rgba(0,0,0,0.06)}.btn-calc{background:#2563eb;color:#fff;border:none;width:100%;padding:10px;border-radius:8px;cursor:pointer}.footer{background:#0f172a;color:#94a3b8;padding:12px;font-size:11px;text-align:center;margin-top:auto}.bigBtn{padding:20px;font-size:17px;border-radius:15px;border:none;color:#fff;width:100%;margin-bottom:10px;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px}.targetBtn{background:linear-gradient(135deg,#2563eb,#1d4ed8)}.counterBtn{background:linear-gradient(135deg,#16a34a,#15803d)}.tutorialBtn{background:linear-gradient(135deg,#f59e0b,#d97706)}</style></head><body><div id="main-app-container"><div id="home" class="page active"><div class="header"><span>Production Master</span><button onclick="openPage('history')" style="background:#f59e0b;color:#fff;border:none;padding:5px;border-radius:4px">üìú History</button></div><div class="container"><h1 style="text-align:center;margin:20px 0;font-size:22px;color:#1e3a8a">Welcome!</h1><button class="bigBtn targetBtn" onclick="openPage('target')">üéØ Target</button><button class="bigBtn counterBtn" onclick="openPage('counter')">üî¢ Counter</button><button class="bigBtn tutorialBtn" onclick="openPage('tutorial')">üìñ Tutorial</button></div><div class="footer">Developed by <b>Burhan Uddin</b></div></div></div><script>/* ‡¶π‡¶ø‡¶ú‡¶ø‡¶¨‡¶ø‡¶ú‡¶ø ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü */eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('6 7(a){d.e(".4").f(p=>p.g.h("i"));d.j(a).g.k("i");l.m(0,0);n(a!==\'o\')b.c({4:a},q,"")}',26,26,'||||page||function|openPage|||id|history|pushState|document|querySelectorAll|forEach|classList|remove|active|getElementById|add|window|scrollTo|if|home|const|null'.split('|'),0,{}))</script></body></html>              <div class="grid">
                <input type="number" id="t_cs" oninput="syncSlot('t'); autoNeedle('t')" placeholder="Slot">
                <input type="number" id="t_ca" oninput="autoNeedle('t')" placeholder="Needle">
              </div>
              <label style="margin-top:4px">Dial (1 Repeat):</label>
              <div class="grid">
                <input type="number" id="t_ds" oninput="autoNeedle('t')" placeholder="Slot">
                <input type="number" id="t_da" oninput="autoNeedle('t')" placeholder="Needle">
              </div>
            </div>

            <div style="grid-column: span 2"><label>Total Needles (Calculated)</label><input type="number" id="t_needles" style="background:#f0f9ff; font-weight:bold"></div>
            <div><label>Feeders</label><input type="number" id="t_feeders"></div>
            <div><label>RPM</label><input type="number" id="t_rpm"></div>
            <div style="grid-column: span 2"><label>Hours</label><input type="number" id="t_hours" value="8"></div>
          </div>
        </div>
        <div class="card"><h3>Main Yarns</h3><div id="t_yarn_list"></div><button class="btn-add" onclick="addYarn('t')">+ Add Yarn</button></div>
        <div class="card"><h3>Lycra (Optional)</h3><div class="grid-3"><div><label>Denier</label><input type="number" id="t_ly_den"></div><div><label>S.L(mm)</label><input type="number" id="t_ly_sl" step="0.01"></div><div><label>Feeders</label><input type="number" id="t_ly_u"></div></div></div>
        <button class="btn-calc" onclick="calculate('target')">Calculate Production</button>
        <button class="btn-reset" onclick="resetForm('target')">Reset All</button>
      </div>
    </div>

    <div id="history" class="page">
      <div class="header"><button class="back" onclick="goBack()">‚Üê</button> Production History</div>
      <div class="container">
        <div id="history_list" style="margin-top:5px"></div>
        <button class="btn-reset" onclick="clearHistory()" style="background:#fee2e2; color:#dc2626">Clear All History</button>
      </div>
    </div>

    <div id="counter" class="page">
      <div class="header"><button class="back" onclick="goBack()">‚Üê</button> Counter Set</div>
      <div class="container">
        <div class="card"><label>Required Weight (KG)</label><input type="number" id="c_reqKg" placeholder="Ex: 20.5" style="font-weight: bold; color: var(--primary)"></div>
        <div class="card">
            <div class="grid">
                <select id="c_mode" style="grid-column: span 2" onchange="handleMode('c')">
                    <option value="jersey">Single Jersey / Fleece</option>
                    <option value="rib">Rib / Interlock (Manual/Design)</option>
                </select>
                <div><label>Dia</label><input type="number" id="c_dia" oninput="autoNeedle('c'); autoFeeder('c');"></div>
                <div><label>GG</label><input type="number" id="c_gg" oninput="autoNeedle('c')"></div>
                
                <div id="c_design_box" class="design-box">
                    <label>Cylinder (1 Repeat):</label>
                    <div class="grid">
                      <input type="number" id="c_cs" oninput="syncSlot('c'); autoNeedle('c')" placeholder="Slot">
                      <input type="number" id="c_ca" oninput="autoNeedle('c')" placeholder="Needle">
                    </div>
                    <label style="margin-top:4px">Dial (Repeat):</label>
                    <div class="grid">
                      <input type="number" id="c_ds" oninput="autoNeedle('c')" placeholder="Slot">
                      <input type="number" id="c_da" oninput="autoNeedle('c')" placeholder="Needle">
                    </div>
                </div>

                <div style="grid-column: span 2"><label>Total Needles</label><input type="number" id="c_needles" style="background:#f0f9ff"></div>
                <div><label>Feeders</label><input type="number" id="c_feeders"></div>
                <div><label>RPM</label><input type="number" id="c_rpm"></div>
            </div>
        </div>
        <div class="card"><h3>Main Yarns</h3><div id="c_yarn_list"></div><button class="btn-add" onclick="addYarn('c')">+ Add Yarn</button></div>
        <div class="card"><h3>Lycra (Optional)</h3><div class="grid-3"><div><label>Denier</label><input type="number" id="c_ly_den"></div><div><label>S.L(mm)</label><input type="number" id="c_ly_sl" step="0.01"></div><div><label>Feeders</label><input type="number" id="c_ly_u"></div></div></div>
        <button class="btn-calc" onclick="calculate('counter')">Find Counter Value</button>
        <button class="btn-reset" onclick="resetForm('counter')">Reset All</button>
      </div>
    </div>

<div id="tutorial" class="page">
    <div class="header">
        <button class="back" onclick="goBack()">‚Üê</button>
        <span>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶ß‡¶ø ‡¶ì ‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤</span>
        <span style="width:30px"></span>
    </div>

    <div class="container" style="padding-bottom: 20px;">
        <div class="card" style="border-top: 5px solid var(--primary);">
            <h2 style="font-size:16px; color:var(--primary); margin-bottom:8px">Knitting Production Master - ‡¶ó‡¶æ‡¶á‡¶°</h2>
            <p style="font-size: 13px; line-height: 1.5; color: #444; text-align: justify;">
                ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶®‡¶ø‡¶ü‡¶ø‡¶Ç ‡¶´‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶∞‡¶ø‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶Æ‡ßá‡¶∂‡¶ø‡¶® ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú‡¶ï‡ßá ‡¶∏‡¶π‡¶ú ‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡ßÅ‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶®‡¶ø‡¶ö‡ßá ‡¶è‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã:
            </p>
        </div>

        <div class="card" style="border-left: 4px solid var(--primary);">
            <h3 style="background:var(--primary); color:#fff; padding:6px; border-radius:6px; font-size:13px; border:none; display:flex; align-items:center; gap:8px">
                <span>üéØ</span> ‡ßß. ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü
            </h3>
            <p style="font-size: 13px; color: #1e293b; line-height:1.5; margin-top:10px">
                <b style="color:var(--primary)">‚Ä¢ Target:</b> ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü‡ßá (‡ßÆ/‡ßß‡ß® ‡¶ò‡¶£‡ßç‡¶ü‡¶æ) ‡¶ï‡¶§ ‡¶ï‡ßá‡¶ú‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶π‡¶¨‡ßá ‡¶§‡¶æ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡¶æ‡•§
            </p>
            
            <div style="margin-top:10px">
                <p style="font-size:12px; font-weight:bold">‡¶ß‡¶æ‡¶™ ‡ßß:</p>
                <button class="bigBtn targetBtn" style="padding:10px; font-size:13px; width:200px" onclick="openPage('target')">üéØ Target Calculator</button>
                <p style="font-size:12px">‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            </div>

            <div style="margin-top:15px">
                <h3 style="font-size:13px; color:var(--secondary); border:none">‡¶ß‡¶æ‡¶™ ‡ß®:</h3>
                <ul style="font-size:12px; color:#444; margin-left:15px; line-height:1.6">
                    <li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∂‡¶ø‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶® (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)‡•§</li>
                    <li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡¶ø‡¶ï ‡¶ï‡ßã‡¶® ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</li>
                    <div style="margin:5px 0">
                        <label style="font-size:10px">‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ :</label>
                        <select style="width:100%; padding:5px; font-size:12px"><option>Single Jersey / Fleece</option><option>Rib / Interlock (Manual/Design)</option></select>
                    </div>
                    <li>‡¶Æ‡ßá‡¶∂‡¶ø‡¶® ‡¶°‡¶æ‡ßü‡¶æ‡¶∞ ‡¶ì ‡¶ó‡ßá‡¶ú ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§ ‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶ì ‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶´‡¶ø‡¶°‡¶æ‡¶∞ ‡¶ö‡¶≤‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶ì ‡¶´‡¶ø‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§</li>
                </ul>
                <div style="background:#f8fafc; padding:8px; border-radius:6px; margin-top:8px">
                    <label style="font-size:10px">‡¶®‡¶Æ‡ßÅ‡¶®‡¶æ :</label>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px">
                        <input type="text" placeholder="Total Needles" style="font-size:11px">
                        <input type="text" placeholder="Feeders" style="font-size:11px">
                    </div>
                </div>
                <div style="background:#e0f2fe; padding:10px; border: 2px solid #0284c7; border-radius:8px; margin-top:10px;">
                    <p style="font-size:12px; font-weight:bold; color:#0369a1; margin-bottom:5px;">‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:</p>
                    <p style="font-size:12px; color:#333; margin-bottom:8px;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶ø ‡ßß√ó‡ßß ‡¶∞‡¶ø‡¶¨‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡ßü‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶ó‡ßá‡¶ú ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡¶ø‡•§ ‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶´‡¶ø‡¶°‡¶æ‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü ‡¶π‡ßü‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</p>
                    <img src="https://raw.githubusercontent.com/burhan5912035/Knitting-Calculator/main/rib1.jpg" width="100%" style="border-radius:4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                </div>
            </div>

            <div style="margin-top:15px; font-size:12px; border-top:1px solid #eee; padding-top:10px">
                <p>‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡¶ø‡¶ï ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶°‡ßç‡¶∞‡¶™ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶¨‡¶æ ‡ß®√ó‡ßß, ‡ß™√ó‡ß©, ‡ßÆ√ó‡ß™ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶π‡ßü ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶è‡¶ï ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∏‡ßç‡¶≤‡¶ü ‡¶ì ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</p>
                <div style="background:#fdfcf0; padding:8px; border-radius:6px; border:1px solid #e9e5d5; margin-top:5px">
                    <label style="font-size:10px">‡¶®‡¶Æ‡ßÅ‡¶®‡¶æ (Cylinder Repeat):</label>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px">
                        <input type="text" placeholder="‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡ßç‡¶≤‡¶ü ‡¶Ü‡¶õ‡ßá?" style="font-size:11px">
                        <input type="text" placeholder="‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶Ü‡¶õ‡ßá?" style="font-size:11px">
                    </div>
                    <label style="margin-top:4px">Dial (1 Repeat):</label>
                    <div class="grid">
                        <input type="number" id="t_ds_tut" placeholder="‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡ßç‡¶≤‡¶ü ‡¶Ü‡¶õ‡ßá?">
                        <input type="number" id="t_da_tut" placeholder="‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶Ü‡¶õ‡ßá?">
                    </div>
                </div>
                <div style="background:#fff7ed; padding:10px; border: 2px solid #ea580c; border-radius:8px; margin-top:15px;">
                    <p style="font-size:12px; font-weight:bold; color:#9a3412; margin-bottom:5px;">‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:</p>
                    <p style="font-size:12px; color:#333; margin-bottom:8px;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶ø ‡ß®√ó‡ßß ‡¶∞‡¶ø‡¶¨‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡ßü‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶ó‡ßá‡¶ú ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡¶ø‡•§ ‡ß®√ó‡ßß ‡¶è ‡¶∏‡¶ø‡¶≤‡¶ø‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡ß® ‡¶ü‡¶ø ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡ßß ‡¶ü‡¶ø ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶Ö‡¶∞‡ßç‡¶•‡¶æ‡ßé ‡ß© ‡¶ü‡¶ø ‡¶∏‡ßç‡¶≤‡¶ü‡ßá ‡ßß ‡¶ü‡¶ø ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü‡•§ ‡¶°‡¶æ‡ßü‡¶æ‡¶≤‡ßá ‡ß® ‡¶ü‡¶ø ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡ßß ‡¶ü‡¶ø ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶Ö‡¶∞‡ßç‡¶•‡¶æ‡ßé ‡ß© ‡¶ü‡¶ø ‡¶∏‡ßç‡¶≤‡¶ü‡ßá ‡ßß ‡¶ü‡¶ø ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü‡•§ ‡¶§‡¶æ‡¶á ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶ø‡¶≤‡¶ø‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶∏‡ßç‡¶≤‡¶ü‡ßá ‡ß© ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶°‡ßá‡¶≤‡ßá ‡ß® ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡•§ ‡¶ü‡ßã‡¶ü‡¶æ‡¶≤ ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶´‡¶ø‡¶°‡¶æ‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü ‡¶π‡ßü‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</p>
                    <img src="https://raw.githubusercontent.com/burhan5912035/Knitting-Calculator/main/rib2.jpg" width="100%" style="border-radius:4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                </div>
            </div>

            <div style="margin-top:15px; background:#f0f9ff; padding:10px; border-radius:8px; font-size:12px; line-height:1.5">
                <p><b>‡ßß. ‡¶∏‡ßç‡¶≤‡¶ü (Slot):</b> ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶ø‡¶≤‡¶ø‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶°‡¶æ‡ßü‡¶æ‡¶≤‡ßá‡¶∞ ‡¶ó‡¶æ‡ßü‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶≤‡¶Æ‡ßç‡¶¨‡¶æ‡¶≤‡¶Æ‡ßç‡¶¨‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßá ‡¶∏‡¶∞‡ßÅ ‡¶ñ‡¶æ‡¶Å‡¶ú ‡¶¨‡¶æ ‡¶ò‡¶∞ ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶ï‡ßá‡¶á ‡¶∏‡ßç‡¶≤‡¶ü ‡¶¨‡¶≤‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶π‡¶≤‡ßã ‡¶∏‡ßÅ‡¶Å‡¶á ‡¶¨‡¶∏‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ‡•§ ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡ßç‡¶≤‡¶ü ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶§‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá‡¶∞ ‡¶°‡¶æ‡ßü‡¶æ (Dia) ‡¶è‡¶¨‡¶Ç ‡¶ó‡ßá‡¶ú (GG) ‡¶è‡¶∞ ‡¶ì‡¶™‡¶∞‡•§</p>
                <p style="margin-top:8px"><b>‡ß®. ‡¶®‡¶ø‡¶°‡ßá‡¶≤ (Needle):</b> ‡¶∏‡ßç‡¶≤‡¶ü ‡¶¨‡¶æ ‡¶ò‡¶∞‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶Ø‡ßá ‡¶∏‡ßÅ‡¶Å‡¶á‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ï‡¶æ‡¶™‡ßú ‡¶¨‡ßã‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶∏‡¶æ‡¶®‡ßã ‡¶π‡ßü, ‡¶§‡¶æ‡¶ï‡ßá ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶¨‡¶≤‡ßá‡•§ ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶∏‡ßç‡¶≤‡¶ü‡ßá ‡¶∏‡ßÅ‡¶Å‡¶á ‡¶•‡¶æ‡¶ï‡¶§‡ßá‡¶ì ‡¶™‡¶æ‡¶∞‡ßá, ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶®‡¶æ‡¶ì ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</p>
                <ul style="margin-left:15px">
                    <li><b>‡¶´‡ßÅ‡¶≤ ‡¶®‡¶ø‡¶°‡ßá‡¶≤ (Full Needle):</b> ‡¶Ø‡¶ñ‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ ‡¶∏‡ßç‡¶≤‡¶ü‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶∞‡ßá ‡¶∏‡ßÅ‡¶Å‡¶á ‡¶•‡¶æ‡¶ï‡ßá‡•§</li>
                    <li><b>‡¶°‡ßç‡¶∞‡¶™ ‡¶®‡¶ø‡¶°‡ßá‡¶≤ (Drop Needle):</b> ‡¶Ø‡¶ñ‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶∏‡ßç‡¶≤‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶∏‡ßÅ‡¶Å‡¶á ‡¶¨‡¶∏‡¶æ‡¶®‡ßã ‡¶π‡ßü‡•§</li>
                </ul>
                <p style="margin-top:8px"><b>‡ß©. ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü (Repeat):</b> ‡¶∏‡¶π‡¶ú ‡¶ï‡¶•‡¶æ‡ßü, ‡¶è‡¶ï‡¶ü‡¶ø ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶è‡¶ï ‡¶∏‡ßá‡¶ü‡ßá ‡¶ï‡ßü‡¶ü‡¶ø ‡¶∏‡ßç‡¶≤‡¶ü ‡¶Ü‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ï‡ßü‡¶ü‡¶ø ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶Ü‡¶õ‡ßá, ‡¶§‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡¶á ‡¶π‡¶≤‡ßã ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü‡•§</p>
                <div style="background:#fff; padding:8px; border:1px dashed var(--primary); margin-top:8px">
                    <b>‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:</b> ‡ß®√ó‡ßß ‡¶∞‡¶ø‡¶¨ (2x1 Rib)<br>
                    ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Æ‡ßã‡¶ü ‡ß©‡¶ü‡¶ø ‡¶∏‡ßç‡¶≤‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§ ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡ß®‡¶ü‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶°‡ßá‡¶≤ ‡¶•‡¶æ‡¶ï‡ßá ‡¶è‡¶¨‡¶Ç ‡ßß‡¶ü‡¶ø ‡¶∏‡ßç‡¶≤‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∞‡¶ø‡¶™‡¶ø‡¶ü ‡¶π‡¶¨‡ßá ‡ß© (Slot) : ‡ß® (Needle)‡•§
                </div>
                <p style="margin-top:8px; color:var(--danger); font-weight:bold">‡¶ï‡ßá‡¶® ‡¶è‡¶á ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?</p>
                <p>‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶∞‡¶æ‡¶®‡¶ø‡¶Ç ‡¶®‡¶ø‡¶°‡ßá‡¶≤‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶∏‡ßç‡¶≤‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶°‡ßá‡¶≤‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶™‡¶æ‡¶§ (Repeat) ‡¶®‡¶æ ‡¶¶‡ßá‡¶®, ‡¶§‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶®‡ßá‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡ßá ‡¶Ö‡¶®‡ßá‡¶ï ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡¶æ ‡¶ï‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‡•§</p>
            </div>
            
            <p style="font-size:12px; margin-top:10px"><li>‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá ‡¶ï‡¶§‡ßã RPM ‡¶ö‡¶≤‡ßá ‡¶§‡¶æ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</li></p>
        </div>

        <div class="card" style="border-left: 4px solid var(--success);">
            <h3 style="font-size:13px; color:var(--success); border-bottom:1px solid #eee; padding-bottom:4px; border-radius:0">‡¶ß‡¶æ‡¶™ ‡ß®: ‡¶∏‡ßÅ‡¶§‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
            <ul style="font-size:12px; color:#444; margin-left:15px; line-height:1.6; margin-top:8px">
                <li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡ßü‡¶æ‡¶∞‡ßç‡¶®‡ßá ‡¶ß‡¶∞‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶ï‡¶ü‡¶® ‡¶π‡¶≤‡ßá Ne, ‡¶™‡¶≤‡ßá‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶π‡¶≤‡ßá Den‡•§</li>
                <div style="margin:5px 0">
                    <label style="font-size:10px">‡¶®‡¶Æ‡ßÅ‡¶®‡¶æ:</label>
                    <select style="width:80px; padding:3px; font-size:12px"><option>Ne</option><option>Den</option></select>
                </div>
                <li>‡¶∏‡ßÅ‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</li>
                <li>‡¶â‡¶ï‡ßç‡¶§ ‡¶∏‡ßÅ‡¶§‡¶æ‡¶∞ ‡¶è‡¶∏‡¶è‡¶≤ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</li>
                <li>‡¶â‡¶ï‡ßç‡¶§ ‡¶∏‡ßÅ‡¶§‡¶æ ‡¶ï‡¶§‡ßã ‡¶´‡¶ø‡¶°‡¶æ‡¶∞‡ßá ‡¶ö‡¶≤‡ßá ‡¶§‡¶æ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</li>
            </ul>
            <div style="background:#f0fdf4; padding:8px; font-size:12px; margin-top:8px; border-radius:6px">
                <p>‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ï‡¶á ‡¶∏‡ßÅ‡¶§‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶è‡¶∏‡¶è‡¶≤ ‡¶¨‡¶æ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶∏‡ßÅ‡¶§‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶§‡¶æ <b>add yarn</b> ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡ßá‡¶™‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</p>
                <p style="margin-top:5px"><b>‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ (Fleece):</b><br>
                ‚Ä¢ Knit: 30 Count, SL 4.50, Feeder 34<br>
                ‚Ä¢ Bind: 50 Denier, SL 3.50, Feeder 34<br>
                ‚Ä¢ Loop: 16 Count, SL 1.60, Feeder 34</p>
            </div>
        </div>

        <div class="card" style="border-left: 4px solid var(--warning);">
            <h3 style="font-size:13px; color:var(--warning); border-bottom:1px solid #eee; padding-bottom:4px; border-radius:0">‡¶ß‡¶æ‡¶™ ‡ß© ‡¶ì ‡ß™:</h3>
            <ul style="font-size:12px; color:#444; margin-left:15px; line-height:1.6; margin-top:8px">
                <li><b>‡¶ß‡¶æ‡¶™ ‡ß©:</b> ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï‡ßú‡¶æ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü, ‡¶è‡¶∏‡¶è‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶§‡ßã ‡¶´‡¶ø‡¶°‡¶æ‡¶∞‡ßá ‡¶ö‡¶≤‡ßá ‡¶§‡¶æ ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®‡•§</li>
                <li><b>‡¶ß‡¶æ‡¶™ ‡ß™:</b> ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶¨‡ßá, ‡¶Ø‡¶æ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶¨‡¶æ‡¶ü‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</li>
            </ul>
        </div>

        <div class="card" style="border-left: 4px solid var(--secondary);">
            <h3 style="background:var(--secondary); color:#fff; padding:6px; border-radius:6px; font-size:13px; border:none; display:flex; align-items:center; gap:8px">
                <span>üî¢</span> ‡ß®. ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞
            </h3>
            <p style="font-size: 12px; color: #444; margin-top:8px">‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ì‡¶ú‡¶®‡ßá‡¶∞ ‡¶∞‡ßã‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá ‡¶ï‡¶§ ‡¶™‡¶æ‡¶ï (Rev) ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá ‡¶§‡¶æ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡¶æ‡•§</p>
            <p style="font-size:12px; font-weight:bold; margin-top:8px">‡¶ß‡¶æ‡¶™ ‡ßß:</p>
            <button class="bigBtn counterBtn" style="padding:10px; font-size:13px; width:200px" onclick="openPage('counter')">üî¢ Counter Calculator</button>
            <p style="font-size:12px; font-weight:bold; margin-top:8px">‡¶ß‡¶æ‡¶™ ‡ß®:</p>
            <div style="background:#f8fafc; padding:8px; border-radius:6px">
                <label style="font-size:10px">Required Weight (KG):</label>
                <input type="number" placeholder="‡¶ï‡¶§‡ßã ‡¶ï‡ßá‡¶ú‡¶ø ‡¶ï‡¶æ‡¶™‡ßú ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®?" style="font-size:12px; width:100%" readonly>
            </div>
            <p style="font-size:12px; font-weight:bold; margin-top:10px">‡¶ß‡¶æ‡¶™ ‡ß©:</p>
            <p style="font-size:12px">Target Calculator ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§</p>
        </div>

        <div class="card" style="text-align:center; background:linear-gradient(135deg, #0f172a, #1e293b); color:#fff; border:none; padding:20px; border-radius: 20px;">
            <p style="font-size:14px; font-weight: bold; margin-bottom: 3px; color: #38bdf8;">‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞: ‡¶¨‡ßã‡¶∞‡¶π‡¶æ‡¶® ‡¶â‡¶¶‡ßç‡¶¶‡¶ø‡¶®</p>
            <p style="font-size:11px; opacity: 0.8; margin-bottom: 3px;">‡¶®‡¶ø‡¶ü‡¶ø‡¶Ç ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</p>
            <p style="font-size:11px; opacity: 0.8;">‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶®‡ßÄ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡¶ø‡¶ï‡ßç‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶° (‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶®‡ßÄ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™)</p>
            <div style="height:1px; background:rgba(255,255,255,0.1); margin:12px 0"></div>
            <p style="font-size:12px;">üìû ‡ß¶‡ßß‡ß¨‡ßß‡ß®‡ß™‡ß¨‡ß¶‡ß´‡ß¶‡ßÆ | ¬© ‡ß®‡ß¶‡ß®‡ß¨</p>
        </div>
    </div>
</div>
</div>

<script>
function openPage(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  window.scrollTo(0, 0);
  if(id === 'history') loadHistory();
  if(id !== 'home') history.pushState({page: id}, null, "");
}

function goBack() {
  if (history.state && history.state.page !== 'home') history.back();
  else openPage('home');
}

window.onpopstate = (e) => {
  const pageId = e.state ? e.state.page : "home";
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById(pageId).classList.add("active");
};

function handleMode(p) {
  const mode = document.getElementById(p + '_mode').value;
  document.getElementById(p + '_design_box').style.display = (mode === 'rib') ? 'block' : 'none';
  autoNeedle(p);
  autoFeeder(p);
}

function autoFeeder(p) {
    const dia = +document.getElementById(p + '_dia').value;
    const mode = document.getElementById(p + '_mode').value;
    if(dia) {
        document.getElementById(p + '_feeders').value = (mode === 'jersey') ? dia * 3 : dia * 2;
    }
}

function syncSlot(p) {
    document.getElementById(p + '_ds').value = document.getElementById(p + '_cs').value;
}

function autoNeedle(p) {
  const dia = +document.getElementById(p + '_dia').value;
  const gg = +document.getElementById(p + '_gg').value;
  const mode = document.getElementById(p + '_mode').value;
  if(!dia || !gg) return;
  let base = Math.PI * dia * gg;
  let total = 0;
  if(mode === 'jersey') {
    total = base;
  } else {
    let cs = +document.getElementById(p + '_cs').value || 1;
    let ca = +document.getElementById(p + '_ca').value || 1;
    let ds = +document.getElementById(p + '_ds').value || 1;
    let da = +document.getElementById(p + '_da').value || 1;
    total = ((base / cs) * ca) + ((base / ds) * da);
  }
  document.getElementById(p + '_needles').value = Math.round(total);
}

function addYarn(prefix) {
  const container = document.getElementById(`${prefix}_yarn_list`);
  const div = document.createElement("div");
  div.className = "yarn-box";
  div.innerHTML = `
    <div class="grid-3">
      <div><label>Type</label><select class="y-type"><option value="ne">Ne</option><option value="den">Den</option></select></div>
      <div><label>Count</label><input type="number" class="y-count" placeholder="30"></div>
      <div><label>SL(mm)</label><input type="number" class="y-sl" step="0.01" placeholder="2.80"></div>
      <div style="grid-column: span 3"><label>Used Feeders</label><input type="number" class="y-used" placeholder="96"></div>
    </div>
    <span class="remove-btn" onclick="this.parentElement.remove()">‚úï Remove</span>
  `;
  container.appendChild(div);
}

function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }

function calculate(mode) {
  const p = mode === 'target' ? 't' : 'c';
  const needles = +document.getElementById(`${p}_needles`).value;
  const rpm = +document.getElementById(`${p}_rpm`).value;
  const hours = p === 't' ? +document.getElementById(`${p}_hours`).value : 1;
  const totalF = +document.getElementById(`${p}_feeders`).value;
  
  if(!needles || !rpm) { alert("Config ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!"); return; }

  let totalGPM = 0;
  let yarnInfo = [];
  const yarns = document.querySelectorAll(`#${p}_yarn_list .yarn-box`);
  let valid = false;

  yarns.forEach(box => {
    const type = box.querySelector(".y-type").value;
    const count = +box.querySelector(".y-count").value;
    const sl = +box.querySelector(".y-sl").value;
    const used = +box.querySelector(".y-used").value;
    if(count && sl && used) {
      valid = true;
      const tex = (type === "ne") ? (590.5 / count) : (count / 9);
      const gpm = (rpm * used * needles * sl * tex) / 1000000000;
      totalGPM += gpm;
      yarnInfo.push({
          count: count + (type === 'ne' ? ' Ne' : ' D. Poly'), 
          sl: sl, 
          ratio: (used/totalF).toFixed(2)
      });
    }
  });

  const lDen = +document.getElementById(`${p}_ly_den`).value;
  const lSl = +document.getElementById(`${p}_ly_sl`).value;
  const lU = +document.getElementById(`${p}_ly_u`).value;
  let lyGPM = 0;
  if(lDen && lSl && lU) {
    lyGPM = (rpm * lU * needles * lSl * (lDen / 9)) / 1000000000;
    totalGPM += lyGPM;
  }

  if(!valid) { alert("‡¶∏‡ßÅ‡¶§‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®!"); return; }

  const lyP = totalGPM > 0 ? ((lyGPM / totalGPM) * 100).toFixed(2) : 0;

  if(mode === 'target') {
    const totalKg = (totalGPM * 60 * hours).toFixed(2);
    document.getElementById('modal-title').innerText = "Production Result";
    let modalText = `<b>M/C:</b> ${document.getElementById('t_mc_no').value || "N/A"}<br>`;
    modalText += `<b>Dia:</b> ${document.getElementById('t_dia').value}√ó${document.getElementById('t_gg').value}G<br>`;
    modalText += `<b>Needle:</b> ${needles} | <b>Feeder:</b> ${totalF} | <b>RPM:</b> ${rpm}<hr>`;
    yarnInfo.forEach(y => modalText += `<b>Yarn:</b> ${y.count} | <b>SL:</b> ${y.sl} | <b>Ratio:</b> ${y.ratio}<br>`);
    if(lDen) modalText += `<b>Lycra:</b> ${lDen} D. Ly | <b>SL:</b> ${lSl} | <b>Ratio:</b> ${(lU/totalF).toFixed(2)}<br><b>Lycra Percentage:</b> ${lyP}%<br>`;
    modalText += `<hr><div style="font-size:18px; color:var(--success); font-weight:bold; text-align:center">Target: ${totalKg} KG</div>`;
    
    document.getElementById('modal-body').innerHTML = modalText;
    document.getElementById('modal-overlay').style.display = 'flex';

    saveHistory({
        mc: document.getElementById('t_mc_no').value || "N/A",
        dia: document.getElementById('t_dia').value,
        gg: document.getElementById('t_gg').value,
        feeder: totalF,
        needle: needles,
        rpm: rpm,
        yarns: yarnInfo,
        ly: lDen ? {count: lDen + ' D. Ly', sl: lSl, ratio: (lU/totalF).toFixed(2), p: lyP} : null,
        out: totalKg
    });
  } else {
    const reqKg = +document.getElementById("c_reqKg").value;
    if(!reqKg) return alert("‡¶ï‡¶æ‡¶ô‡ßç‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶ì‡¶ú‡¶® (KG) ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");
    const revNeeded = Math.round(reqKg / (totalGPM / rpm));
    
    document.getElementById('modal-title').innerText = "Counter Set Value";
    let modalText = `<div style="text-align:center; padding:10px">`;
    modalText += `<span style="font-size:14px; color:#555">Required Weight: <b>${reqKg} KG</b></span><br><br>`;
    modalText += `<span style="font-size:24px; color:#b45309; font-weight:800">${revNeeded.toLocaleString()} Rev</span><br><br>`;
    modalText += `<span style="font-size:12px; color:#666">‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶è‡¶á ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ‡¶ü‡¶ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</span></div>`;
    
    document.getElementById('modal-body').innerHTML = modalText;
    document.getElementById('modal-overlay').style.display = 'flex';
  }
}

function saveHistory(data) {
    let hist = JSON.parse(localStorage.getItem('knit_v3')) || [];
    const now = new Date();
    hist.unshift({date: now.toLocaleDateString(), time: now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}), ...data});
    localStorage.setItem('knit_v3', JSON.stringify(hist.slice(0, 50)));
}

function loadHistory() {
    const hist = JSON.parse(localStorage.getItem('knit_v3')) || [];
    document.getElementById('history_list').innerHTML = hist.map((h, i) => `
        <div class="hist-card">
            <span class="del-icon" onclick="deleteEntry(${i})">‚úï</span>
            <div class="hist-header"><span>M/C: ${h.mc}</span> <span>${h.date} | ${h.time}</span></div>
            <div class="grid">
                <div><b>Dia:</b> ${h.dia}√ó${h.gg}G</div><div><b>Needle:</b> ${h.needle}</div>
                <div><b>Feeder:</b> ${h.feeder}</div><div><b>RPM:</b> ${h.rpm}</div>
            </div>
            ${h.yarns.map(y => `<div style="margin-top:2px"><b>Yarn:</b> ${y.count} | <b>SL:</b> ${y.sl} | <b>Ratio:</b> ${y.ratio}</div>`).join('')}
            ${h.ly ? `<div style="color:#6366f1"><b>Lycra:</b> ${h.ly.count} | <b>SL:</b> ${h.ly.sl} | <b>Ratio:</b> ${h.ly.ratio} (${h.ly.p}%)</div>` : ''}
            <div style="color:var(--success); font-weight:bold; margin-top:4px; border-top:1px solid #eee; padding-top:2px">Target: ${h.out} KG</div>
        </div>
    `).join('') || "<p style='text-align:center; padding:20px'>No history.</p>";
}

function deleteEntry(i) {
    let hist = JSON.parse(localStorage.getItem('knit_v3'));
    hist.splice(i, 1);
    localStorage.setItem('knit_v3', JSON.stringify(hist));
    loadHistory();
}

function clearHistory() { if(confirm("Clear all?")) { localStorage.removeItem('knit_v3'); loadHistory(); } }

function resetForm(mode) {
  const p = mode === 'target' ? 't' : 'c';
  document.querySelectorAll(`#${mode} input`).forEach(i => { if(i.id !== p + '_hours') i.value = ""; });
  document.getElementById(`${p}_yarn_list`).innerHTML = "";
  addYarn(p); autoNeedle(p);
}

(function() { addYarn('t'); addYarn('c'); history.replaceState({page: "home"}, null, ""); })();
</script>
</body>
  </html>
